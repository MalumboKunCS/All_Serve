# ALL SERVE - Service Provider App

A Flutter application that connects users with service providers for various home and business services.

## Features

### üîÑ Random Category Selection
- **Book an Appointment** section displays 6 random service categories every time the app opens
- Categories are fetched from Firebase Firestore database
- Each app launch shows a different selection of services
- Fallback to default categories if Firebase is unavailable

### üìç Location-Based Provider Recommendations
- **Suggested Providers** section shows service providers based on:
  - User's previous service providers (marked with "Previous" badge)
  - Nearby providers within 50km radius (sorted by distance)
  - Provider ratings and review counts
- Real-time location detection using device GPS
- Distance information displayed for each provider

### üîê Authentication
- Firebase Authentication integration
- User login/logout functionality
- Secure access to user-specific data

## Setup Instructions

### 1. Firebase Configuration
1. Create a Firebase project at [Firebase Console](https://console.firebase.google.com/)
2. Enable Authentication and Firestore Database
3. Download `google-services.json` and place it in `android/app/`
4. Configure iOS settings if building for iOS

### 3. Running the app

#### Android

1) Install Flutter SDK and Android Studio (with Android SDK + Platform Tools)
2) Connect a device (USB debugging) or create an Android Emulator
3) From project root:

```
flutter pub get
flutter devices
flutter run -d <device_id>
```

Optional builds:

```
flutter build apk
flutter build appbundle
```

Notes:
- Ensure `android/app/google-services.json` is present (from Firebase Console)
- Keep `applicationId` in `android/app/build.gradle.kts` in sync with Firebase Android app package name

#### Web

1) Ensure `lib/firebase_options.dart` exists (generated by `flutterfire configure`)
2) From project root:

```
flutter pub get
flutter run -d chrome
```

Build for deploy:

```
flutter build web
```

Host the `build/web` output on a static host (or use Firebase Hosting).

### 2. Database Structure
Create the following collections in Firestore:

#### Categories Collection
```json
{
  "icon": "plumbing",
  "label": "Plumbing",
  "description": "Professional plumbing services",
  "active": true
}
```

#### Providers Collection
```json
{
  "name": "John Smith Plumbing",
  "rating": 4.8,
  "reviews": 120,
  "image": "https://example.com/image.jpg",
  "location": {
    "latitude": 40.7128,
    "longitude": -74.0060,
    "address": "123 Main St, City, State"
  },
  "services": ["plumbing", "drain_cleaning"]
}
```

#### Bookings Collection
```json
{
  "userId": "user123",
  "providerId": "provider456",
  "serviceType": "plumbing",
  "status": "completed",
  "createdAt": "2024-01-01T00:00:00Z"
}
```

### 3. Dependencies
The app requires these packages (already added to `pubspec.yaml`):
- `firebase_core`: Firebase initialization
- `firebase_auth`: User authentication
- `cloud_firestore`: Database operations
- `geolocator`: Location services
- `geocoding`: Address geocoding

### 4. Permissions
Location permissions are automatically configured for:
- **Android**: `ACCESS_FINE_LOCATION` and `ACCESS_COARSE_LOCATION`
- **iOS**: Location usage descriptions in `Info.plist`

## Usage

### For Users
1. **Login/Register**: Use the authentication system to access the app
2. **Browse Categories**: View randomly selected service categories
3. **Find Providers**: See recommended providers based on location and history
4. **Book Services**: Tap the "Book" button on any provider

### For Developers
1. **Customize Categories**: Add/modify categories in Firebase
2. **Add Providers**: Register new service providers with location data
3. **Monitor Usage**: Track user interactions through the bookings collection

## Technical Implementation

### Firebase Service (`lib/services/firebase_service.dart`)
- Handles all database operations
- Implements random category selection
- Calculates provider distances
- Manages user booking history

### Icon Helper (`lib/utils/icon_helper.dart`)
- Converts icon strings to Flutter icons
- Provides fallback icons for unknown categories

### Home Page (`lib/pages/home_page.dart`)
- Stateful widget with dynamic data loading
- Pull-to-refresh functionality
- Loading states and error handling
- Responsive UI for categories and providers

## Testing

1. **Run the app**: `flutter run`
2. **Test categories**: Refresh the app to see different category selections
3. **Test location**: Grant location permissions to see nearby providers
4. **Test Firebase**: Ensure database collections are properly set up

## Troubleshooting

### Common Issues
- **Location not working**: Check device permissions and GPS settings
- **Firebase errors**: Verify Firebase configuration and security rules
- **No data showing**: Ensure Firestore collections contain data

### Debug Mode
Enable debug logging by checking the console for error messages and Firebase service logs.

## Contributing

1. Fork the repository
2. Create a feature branch
3. Implement your changes
4. Test thoroughly
5. Submit a pull request

## License

This project is licensed under the MIT License - see the LICENSE file for details.
